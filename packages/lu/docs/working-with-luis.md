# Creating LUIS JSON model file

Once you have created individual .lu files you can parse them all to a LUIS JSON model using this command: 
```bash
> bf luis:convert --in <folder with .lu files> --out <outputfolder> --name <luisAppName> --culture <luisAppCulture>]
```

This will parse all .lu files found and will create **ONE** LUIS JSON model. 

If you would like to create multiple luis apps, then you can add a [root.lu file](./lu-file-format.md#External-references) that holds reference to other relevant .lu files and parse it like this: 

```bash
> bf luis:convert --in <root_file.lu> [--out <outputFolder> --name <luisAppName> --culture <luisAppCulture>]
```

This will parse all .lu files referenced in the root_file.lu and output **ONE** LUIS JSON model. 

# Creating a New LUIS App
## Pre-requisite
- Install the luis-apis CLI via the following command

```bash
> npm i -g luis-apis
```

## using command line 
You can use the new LUIS JSON file to create a new LUIS application using this command.
```bash
luis import application --in _LUISApp.json --authoringKey "" --endpoint ""
```
Note: If you are using LUIS CLI, you might see the option to provide a versionId, application name directly in the LUIS CLI. You can also provide this information directly in the [.lu file format](./lu-file-format.md#Model-description). Information explicitly specified in the LUIS CLI will override any information captured by bf luis:convert command. 

## using [LUIS](http://luis.ai) portal
- Navigate to [LUIS](http://luis.ai)
- Sign in
- Click on My apps
- "Import new App"
- Choose file -> select the _LUISApp.json generated by bf luis:convert command

# Refresh command
After you have bootstrapped and created your LUIS model and / or QnAMaker knowledge base, you might make subsequent refinements to your models directly from [luis.ai](https://luis.ai/) or [qnamaker.ai](https://qnamaker.ai). You can use the refresh command to re-generate .lu files from your LUIS JSON and / or QnAMaker JSON files.  

```
>bf luis:convert or bf qnamaker:convert

  Usage: bf luis:convert --in <LUISJsonFile>  or bf qnamaker:convert --in <QnAJSONFile>

```

# Exporting LUIS model (for bf luis:convert)
## Using CLI
```bash
luis export version --appId <string> --versionId <string> --authoringKey <key>
```
## using [LUIS](http://luis.ai) portal
- Navigate to [LUIS](http://luis.ai)
- Sign in
- Click on My apps
- Find the app you wish to download, click "..." -> Export app

# Exporting QnA Maker 
## using CLI
```bash
bf qnamaker:export:kb --kbId <kbId> --environment <string>
```


